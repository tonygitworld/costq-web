/* ==========================================================================
   CostQ 侧边栏样式表 (Modern Clean + Gemini + Claude 融合风格)
   最后更新：2026-01-28
   ========================================================================== */

/* ===== 1. 侧边栏容器 (Modern Clean) ===== */

.sidebar-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 280px;
  max-width: 280px;
  min-width: 280px;
  position: relative;
  transition: width 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  background-color: #f7f8fa;
  border-right: none;
  color: rgb(68, 71, 70);
  overflow: hidden;
}

:global(.dark) .sidebar-container {
  background-color: #202123;
  color: rgba(255, 255, 255, 0.85);
}

.sidebar-container.sidebar-collapsed {
  width: 0;
  padding: 0;
  border-right: none;
}

.sidebar-container.sidebar-collapsed > * {
  opacity: 0;
  pointer-events: none;
}

.sidebar-container.sidebar-collapsed .sidebar-toggle-wrapper,
.sidebar-container.sidebar-collapsed .sidebar-collapse-floating,
.sidebar-container.sidebar-collapsed .sidebar-collapsed-settings {
  opacity: 1;
  pointer-events: auto;
}


/* ===== 2. 顶部标题区域 ===== */

.sidebar-header {
  padding: 16px 12px 12px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
  height: 52px;
}

.sidebar-logo {
  font-size: 20px;
  line-height: 1;
  margin-right: 8px;
  color: rgb(68, 71, 70);
}

.sidebar-title {
  color: rgb(68, 71, 70) !important;
  margin: 0 !important;
  font-size: 14px !important;
  font-weight: 600 !important;
  line-height: 1.3 !important;
  white-space: nowrap !important;
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
}


/* ===== 3. 折叠/展开按钮 (Gemini 风格) ===== */

.sidebar-collapse-icon {
  width: 34px;
  height: 34px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  border-radius: 50%;
  border: none;
  background-color: transparent;
  padding: 0;
  outline: none;
  cursor: pointer;
  z-index: 10;
  color: rgb(68, 71, 70) !important;
  transition: background-color 0.2s ease, color 0.2s ease;
}

.sidebar-collapse-icon:hover {
  background-color: rgba(0, 0, 0, 0.06) !important;
  color: rgb(55, 53, 47) !important;
}

.sidebar-collapse-floating {
  position: fixed;
  top: 12px !important;
  left: 12px !important;
  z-index: 1000;
  background-color: transparent !important;
  box-shadow: none !important;
}

.sidebar-new-chat-floating {
  top: 56px !important;
}

.sidebar-toggle-glyph {
  display: none !important;
}


/* ===== 4. 新建对话按钮 ===== */

.sidebar-new-chat-wrapper {
  padding: 8px 12px 20px 12px;
  flex-shrink: 0;
}

.sidebar-new-chat-button {
  height: 40px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 0 16px !important;
  border-radius: 100px !important;
  border: 0.666667px solid rgba(0, 0, 0, 0.08) !important;
  background-color: #ffffff !important;
  color: rgb(68, 71, 70) !important;
  font-family: inherit !important;
  font-size: 14px !important;
  font-weight: 500 !important;
  line-height: 25px !important;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
  cursor: pointer !important;
  transition: box-shadow 0.3s ease !important;
}

.sidebar-new-chat-button:hover {
  box-shadow: 0 4px 6px rgba(0,0,0,0.08) !important;
  transform: none !important;
}


/* ===== 5. 分隔线 ===== */

.sidebar-divider {
  margin: 0 !important;
  border-color: transparent !important;
}

.sidebar-divider-bottom {
  display: none !important;
}


/* ===== 6. 对话历史区域 ===== */

.sidebar-history-wrapper {
  flex: 1;
  overflow: hidden;
  padding: 0 6px;
  display: flex;
  flex-direction: column;
  min-width: 0; /* 允许内容自动换行 */
}

.sidebar-scrollable {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
  min-width: 0; /* 允许内容自动换行 */
}

.sidebar-scrollable:hover {
  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}


/* ===== 7. 聊天历史项 (ChatGPT 胶囊风格) ===== */

.chat-history-item {
  position: relative; /* 关键：用于绝对定位子元素 */
  padding: 8px 12px !important;
  margin: 0 6px 1px 6px !important;
  border-radius: 8px !important;
  min-height: 36px !important;
  color: rgb(68, 71, 70) !important;
  border: none !important;
  box-shadow: none !important;
  background-color: transparent;
  transition: all 0.2s ease !important;
}

.chat-history-item:hover {
  background-color: rgba(0, 0, 0, 0.04) !important;
}

.chat-history-item-active {
  background-color: rgba(0, 0, 0, 0.06) !important;
  color: rgb(26, 26, 26) !important;
  font-weight: 500;
}

.chat-history-item-title {
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: inherit;
}

/* 时间/日期 (位于标题下方) */
.chat-history-item-time {
  position: static !important;
  opacity: 1 !important;
  transform: none !important;
  transition: opacity 0.2s ease;
}

/* 悬停时：时间照常显示 (不隐藏) */
.chat-history-item:hover .chat-history-item-time {
  opacity: 1 !important;
}

/* 右侧操作区 (图钉 & 三个点) */
.pin-icon-wrapper {
  opacity: 1;
  transition: opacity 0.2s ease;
}

.trailing-group {
  opacity: 0;
  transition: opacity 0.2s ease;
}

/* 交互逻辑：悬停时，图钉消失，三个点出现 */
.chat-history-item:hover .pin-icon-wrapper {
  opacity: 0 !important;
}

.chat-history-item:hover .trailing-group {
  opacity: 1 !important;
}

.action-button:hover {
  background-color: rgba(0,0,0,0.06);
  color: rgb(26, 26, 26) !important;
}


/* ===== 8. 底部设置菜单区域 ===== */

.sidebar-menu-wrapper {
  flex: 0 0 auto;
  background-color: transparent !important;
  padding: 8px 6px 16px 6px;
}


/* ===== 9. Gemini 风格下拉菜单 (Google Material 3) ===== */

.gemini-dropdown-menu .ant-dropdown-menu {
  width: 160px !important;
  padding: 6px !important;
  border-radius: 12px !important;
  border: 1px solid rgb(229, 231, 235) !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
}

.gemini-dropdown-menu .ant-dropdown-menu-item {
  height: 40px !important;
  padding: 0 16px !important;
  display: flex !important;
  align-items: center !important;
  gap: 12px !important;
  border-radius: 4px !important;
}

.gemini-dropdown-menu .ant-dropdown-menu-item:hover {
  background-color: rgba(68, 71, 70, 0.08) !important;
}

.gemini-dropdown-menu .ant-dropdown-menu-title-content {
  flex: 1;
  font-weight: 500;
  font-size: 14px;
  color: rgb(31, 31, 31);
}

.gemini-dropdown-menu .anticon {
  font-size: 20px !important;
  color: rgb(68, 71, 70);
}


/* ===== 10. Claude 风格确认对话框 ===== */

.claude-modal .ant-modal-content {
  background-color: rgb(250, 249, 245) !important;
  border-radius: 16px !important;
  border: 1px solid rgba(31, 30, 29, 0.15) !important;
  box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1) !important;
  padding: 24px !important;
}

.claude-modal .ant-modal-confirm-title {
  font-size: 20px !important;
  font-weight: 600 !important;
  color: rgb(20, 20, 19) !important;
  margin-bottom: 8px !important;
}

.claude-modal .ant-modal-confirm-content {
  color: rgba(31, 30, 29, 0.6) !important;
  font-size: 14px !important;
}

.claude-modal .ant-modal-confirm-btns {
  margin-top: 24px !important;
}

.claude-modal .ant-btn {
  height: 36px !important;
  border-radius: 8px !important;
  font-weight: 500 !important;
  box-shadow: none !important;
}

.claude-modal .ant-btn-primary {
  background-color: #d93025 !important;
  border-color: #d93025 !important;
}

.claude-modal .ant-btn-default {
  border: 1px solid rgba(0,0,0,0.15) !important;
  background: transparent !important;
}


/* ===== 11. 全局 AntD 组件适配 ===== */

.ant-typography { color: rgb(68, 71, 70) !important; }
.ant-btn-text { color: rgba(26, 26, 26, 0.65) !important; }
.ant-layout-sider-light { border-right: none !important; background-color: #f7f8fa !important; }
.ant-menu-light { border-right: none !important; }


/* ===== 12. 打印优化 ===== */
@media print {
  .sidebar-container {
    display: none;
  }
}


/* ===== 13. 折叠状态下的设置图标 ===== */

.sidebar-collapsed-settings {
  position: fixed;
  bottom: 16px;
  left: 12px;
  z-index: 999;
}

.sidebar-settings-icon {
  width: 34px;
  height: 34px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  border: none;
  background-color: transparent;
  padding: 0;
  outline: none;
  cursor: pointer;
  color: rgb(68, 71, 70);
  transition: background-color 0.2s ease, color 0.2s ease;
}

.sidebar-settings-icon:hover {
  background-color: rgba(0, 0, 0, 0.06);
  color: rgb(26, 26, 26);
}

:global(.dark) .sidebar-settings-icon {
  color: rgba(255, 255, 255, 0.85);
}

:global(.dark) .sidebar-settings-icon:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 1);
}

/* ===== �ռ���ɫǿ������ (Nuclear Option) ===== */
/* 1. ǿ�����в˵��㼶����͸�� */
.sidebar-menu, .sidebar-menu * { background-color: transparent !important; background: transparent !important; }
/* 2. ǿ��������ɫ (Gemini Grey) */
.sidebar-menu .ant-menu-title-content, .sidebar-menu .anticon { color: rgb(68, 71, 70) !important; }
/* 3. ��ͣ/ѡ��ʱ�����⴦�� (�������ң��������) */
.sidebar-menu .ant-menu-submenu-title:hover { background-color: rgba(0, 0, 0, 0.04) !important; }
.sidebar-menu .ant-menu-submenu-title:hover .ant-menu-title-content, .sidebar-menu .ant-menu-submenu-title:hover .anticon { color: rgb(26, 26, 26) !important; }
/* 4. �޸���ͷ */
.sidebar-menu .ant-menu-submenu-arrow { color: rgb(68, 71, 70) !important; }
.sidebar-menu .ant-menu-submenu-arrow::before, .sidebar-menu .ant-menu-submenu-arrow::after { background: rgb(68, 71, 70) !important; }
