/**
 * 响应式设计系统 - Compact密度（数据密集型应用）
 *
 * 参考标准：
 * - Material Design 3 (2024) - Compact Density
 * - Smashing Magazine - Modern Fluid Typography (2022)
 * - Baymard Institute - Optimal Line Length Research (2024)
 * - 8pt Grid System (业界标准)
 *
 * 核心原则：
 * 1. 使用rem单位支持用户自定义字体大小
 * 2. 流式字体确保平滑过渡
 * 3. Compact密度：字体11-13px，间距20-22px
 * 4. 适合数据密集型应用（AWS成本分析工具）
 * 5. 字体和间距比例协调，整体密度一致
 */

:root {
  /* ===== 字体系统 (Fluid Typography) - Compact密度 ===== */
  /* 参考：Smashing Magazine - CSS clamp() 最佳实践 */
  /* 优化目标：统一为Compact密度，适合数据密集型应用 */

  /* 基础字体：11px (小屏) → 13px (大屏) - Compact密度 */
  --font-size-base: clamp(0.6875rem, 0.65rem + 0.2vw, 0.8125rem);

  /* 内容字体：12px → 14px (优化阅读体验) */
  --font-size-content: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);

  /* 小字体：10px → 12px */
  --font-size-small: clamp(0.625rem, 0.6rem + 0.15vw, 0.75rem);

  /* 超小字体：9px → 11px */
  --font-size-xs: clamp(0.5625rem, 0.55rem + 0.1vw, 0.6875rem);

  /* 大字体（用于特殊场景） */
  --font-size-lg: clamp(0.8125rem, 0.75rem + 0.3vw, 0.9375rem);    /* 13px → 15px */
  --font-size-xl: clamp(0.9375rem, 0.85rem + 0.4vw, 1.0625rem);    /* 15px → 17px */

  /* 标题字体 - Compact密度 */
  --font-size-h1: clamp(1.375rem, 1.2rem + 0.9vw, 1.875rem);       /* 22px → 30px */
  --font-size-h2: clamp(1.1875rem, 1rem + 0.7vw, 1.5rem);          /* 19px → 24px */
  --font-size-h3: clamp(1.0625rem, 0.95rem + 0.45vw, 1.3125rem);   /* 17px → 21px */
  --font-size-h4: clamp(0.9375rem, 0.85rem + 0.35vw, 1.1875rem);   /* 15px → 19px */

  /* ===== 行高系统 ===== */
  --line-height-tight: 1.3;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.7;
  --line-height-loose: 1.8;

  /* ===== 间距系统 (8pt Grid + Fluid Spacing) - Compact密度 ===== */
  /* 参考：Material Design 3 间距标准 */
  /* 优化目标：统一为Compact密度，与字体大小协调 */

  /* 固定间距（用于小元素，保持一致性） */
  --spacing-xs: 0.25rem;   /* 4px */
  --spacing-sm: 0.5rem;    /* 8px */
  --spacing-md: 0.875rem;  /* 14px - Compact密度 */
  --spacing-lg: 1.25rem;   /* 20px - Compact密度 */

  /* 流式间距（用于布局，响应视口变化） - Compact密度 */
  --spacing-xl: clamp(1.25rem, 1.8vw + 0.9rem, 1.75rem);   /* 20px → 28px */
  --spacing-xxl: clamp(1.75rem, 2.7vw + 1.3rem, 2.5rem);   /* 28px → 40px */

  /* 消息间距（优化对话流） - Compact密度 */
  --message-spacing: clamp(0.625rem, 0.9vh, 0.875rem);     /* 10px → 14px */

  /* ===== 内容宽度系统 ===== */
  /* 参考：Baymard Institute - 最佳阅读宽度研究 (50-75字符/行) */

  /* AI消息：750px ≈ 47-53字符/行 (16px字体) */
  --message-max-width: min(750px, 90vw);

  /* 用户消息：560px ≈ 35-40字符/行 (更紧凑) */
  --user-message-max-width: min(560px, 70vw);

  /* 代码块：稍宽以容纳代码 */
  --code-max-width: min(900px, 95vw);

  /* 表格：全宽但有限制 */
  --table-max-width: min(1000px, 98vw);

  /* ===== 响应式断点 ===== */
  /* 参考：Material Design 3 断点标准 */
  --breakpoint-xs: 0px;
  --breakpoint-sm: 600px;
  --breakpoint-md: 905px;
  --breakpoint-lg: 1240px;
  --breakpoint-xl: 1440px;
  --breakpoint-xxl: 1920px;

  /* ===== 阴影和圆角 ===== */
  --border-radius-sm: 0.375rem;   /* 6px */
  --border-radius-md: 0.5rem;     /* 8px */
  --border-radius-lg: 0.75rem;    /* 12px */

  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

/* ===== 高分辨率显示器优化 ===== */
/* 参考：Retina/4K/5K显示器字体渲染最佳实践 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
}

/* ===== 响应式断点样式（简化版本） ===== */

/* 小屏幕（手机竖屏）：0-599px */
@media (max-width: 599px) {
  :root {
    /* 更紧凑的间距 - Compact密度 */
    --spacing-lg: 0.875rem;  /* 14px */
    --spacing-xl: 1.25rem;   /* 20px */
    --spacing-xxl: 1.75rem;  /* 28px */

    /* 更窄的内容宽度 */
    --message-max-width: 95vw;
    --user-message-max-width: 85vw;
  }
}

/* 大屏桌面（1440px+）- 略微增加间距，保持Compact密度 */
@media (min-width: 1440px) {
  :root {
    /* 略微增加间距 - 仍保持Compact密度 */
    --spacing-lg: 1.375rem;  /* 22px */
    --spacing-xl: 1.875rem;  /* 30px */
    --spacing-xxl: 2.5rem;   /* 40px */
  }
}

/* ===== 辅助类 ===== */

/* 流式字体应用类 */
.text-base {
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
}

.text-content {
  font-size: var(--font-size-content);
  line-height: var(--line-height-relaxed);
}

.text-small {
  font-size: var(--font-size-small);
  line-height: var(--line-height-normal);
}

/* 间距应用类 */
.spacing-lg {
  margin-bottom: var(--spacing-lg);
}

.spacing-xl {
  margin-bottom: var(--spacing-xl);
}

/* 内容宽度限制类 */
.content-width {
  max-width: var(--message-max-width);
  margin-left: auto;
  margin-right: auto;
}

/* ===== 打印样式优化 ===== */
@media print {
  :root {
    /* 打印时使用固定字体大小 */
    --font-size-base: 12pt;
    --font-size-content: 12pt;
    --font-size-small: 10pt;
  }
}

/* ===== 减少动画偏好用户的优化 ===== */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ===== 深色模式支持（预留） ===== */
@media (prefers-color-scheme: dark) {
  :root {
    /* 深色模式下可能需要稍大的字体以提高可读性 */
    --font-size-base: clamp(0.9375rem, 0.85rem + 0.4vw, 1.0625rem);
  }
}
